<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>


    </style>
</head>
<body>
    <div class="wrapper">
    	<h1>Embed a player card</h1>
    	<p>Select a player</p>
    	<select>
    		<option></option>
    	</select>
    	<p>Here's your iframe</p>
    	<input type="text" id="iframe-url" />
    </div>
    <script>
        var dataSources = [
            {
                "Team":"England",
                "key": "1Zsw-NAT-8xtXSQ8t-X3eyisqJPv4G-qFFHvmZ1ej0fw"
            },{
                "Team":"Germany",
                "key": "1i4gM_GeUfoSvBXRHEpFAhgz3UHJukeLqxBiGwZtMKfc"
            },{
                "Team":"France",
                "key":"1KAJtvbQhvsvZ2ssIY2_7qiLuOYSmFCJ1E_1eQ0ETLas"
            },{
                "Team":"Sweden",
                "key":"1Fl2BMqcD70ArTn9BCA0i-DTs4kGePKYY9SXcDhcFdcI"
            },{
                "Team":"Italy",
                "key":"1UkRPDfrRNOkyIazXFWERCchz9pU1hu7g7wmTRjywBMM"
            },{
                "Team":"Belgium",
                "key":"1Yh-6uphNjJSbjbXhlzfl8SiYl-w6cTvk51_A_vr9sjE"
            },{
                "Team":"Wales" ,
                "key": "1o8MdeEpwI1NQsk7rgVx6qQDhjhjt4foxK1c--tB3DoU"
            },{
                "Team":"Rep of Ireland",
                "key":"12dGYUtIkVrYRw-e0Ht_sjCXxC3qFcoe4ge7iXtKHE6E"
            },{
                "Team":"N Ireland",
                "key":"1bD63bY4jeYtUVg9KFlKRa8C87hHQYKvlYXAxyc-5IMY"
            },{
                "Team":"Spain",
                "key":"14dG-Or6_BhOJQBPcgzQktd6T0w1m93VPYmCEjr-FqMU"
            },{
                "Team":"Portugal",
                "key":"1Tr7SbOKabNyj7-NPsqV-1PnrNlPH46KrZSMev76Mw3s"
            },{
                "Team":"Russia",
                "key":"1dX0AiX3fwQbKrq4KNGCK44ek_g-cUgPao1O_UQJ6e5Y"
            },{
                "Team":"Ukraine",
                "key":"1ddJ0CvPm23g1AB3iK7jRmzqh5f5xGTiunhEmvg7t-aY"
            },{
                "Team":"Romania" ,
                "key":"18oqBD3hE61x-7T_UkNMytIK12vDPSeeVYjm5e7afgqM"
            },{
                "Team":"Croatia",
                "key":"1hyDiy7WOTsZar11Z7JQW9F249rKfwjY7pc7uwFdzs7g"
            },{
                "Team":"Turkey",
                "key":"1T976zQpp_kp4wCtZOCw8vDe8l5GQBJDRARaWcFGmFb4"
            },{
                "Team":"Albania",
                "key":"1UPpqsr7WEwnL7sKX3sT2CoJqVAj_JN-M0UZMJpp85-g"
            },{
                "Team":"Poland",
                "key":"13BT44qfZatoB-QqqKOB3jgea8cUQiMb3DpIDIT4kvRw"
            },{
                "Team":"Austria",
                "key":"1I-Z57rFkvo3fIuh5W3ASAq2d3OCujL_PqPEWrZVA-0Q"
            },{
                "Team":"Switzerland" ,
                "key": "1ff7gCcNTzEdAbFrFsCIBECneskzX-xjjU8ZpsEhJsj8",
            },{
                "Team":"Czech Republic",
                "key":"1lMTejNFx6icnonGIi8kQ3W0NAIEW2mu9DUaGTHjZJWA"
            },{
                "Team":"Slovakia",
                "key":"1mV-s921mm6J4ZYRWRLccuKbZTXIUGePE6T--eY_kAQA"
            },{
                "Team":"Hungary",
                "key":"13PX3dUtmYOkjruakrseUoZoUfKcXIDPi9TsMT8WlX6M"
            },{
                "Team":"Iceland",
                "key": "1jie0qY09f8AqezNJqnVXzRpQOd7EcA9xPsyjkRFzHto"
            }
        ]

        var dataz = [];

        function fetchJSONFile(path, callback) {
            var httpRequest = new XMLHttpRequest();
            httpRequest.onreadystatechange = function() {
                if (httpRequest.readyState === 4) {
                    if (httpRequest.status === 200) {
                        var data = JSON.parse(httpRequest.responseText);
                        if (callback) callback(data);
                    }
                }
            };
            httpRequest.open('GET', path);
            httpRequest.send(); 
        }

        
        function getData(country){
            fetchJSONFile("https://interactive.guim.co.uk/docsdata-test/" + dataSources[country].key + ".json", function(data){
                // do something with your data
                var players = data.sheets.Players;
                dataz.push({
                    "team":dataSources[country].Team,
                    "players":players
                })
                if(country < 23){
                    var newCount = country + 1;
                    getData(newCount)
                    console.log('hoi')
                }else{
                    console.log(dataz);
                }
            });
        }

        getData(0);
    </script>
</body>
</html>
